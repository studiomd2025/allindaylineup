<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ALLINDAY lineup</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <style>
    @font-face {
      font-family: 'BeVietnamPro';
      src: url('BeVietnamPro-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #3B3C41;
      overflow-x: hidden;
      overflow-y: visible;
      position: relative;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      opacity: 0;
      animation: fadeInTwinkle 2s ease-in-out forwards, twinkle 2s infinite ease-in-out;
    }

    @keyframes fadeInTwinkle {
      from { opacity: 0; }
      to { opacity: 0.2; }
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }

    .carousel-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 5vh 5vw;
      height: 100vh;
      width: 100vw;
    }

    #carousel-container {
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      max-width: 90vw;
      max-height: 70vh;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    #carousel {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 10px;
      transition: opacity 0.4s ease-in-out;
      opacity: 0;
    }

    .nav-button {
      background-color: rgba(0, 0, 0, 0.6);
      color: #fff;
      border: none;
      padding: 10px;
      cursor: pointer;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 24px;
      z-index: 2;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }

    .nav-button:hover {
      background-color: #333;
    }

    .prev-button { left: 10px; }
    .next-button { right: 10px; }

    #carousel-container:hover .nav-button {
      opacity: 1;
    }

    .spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 30px;
      height: 30px;
      margin: -15px 0 0 -15px;
      border: 3px solid rgba(255,255,255,0.2);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      z-index: 1;
      display: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .caption {
      text-align: center;
      margin-top: 5vh;
      color: white;
      max-width: 90vw;
    }

    .small,
    .large,
    .special-collab {
      opacity: 0;
      transition: opacity 0.4s ease-in-out;
    }

    .small.show,
    .large.show,
    .special-collab.show {
      opacity: 1;
    }

    .small {
      font-size: 0.85rem;
      font-weight: bold;
      letter-spacing: 1px;
    }

    .large {
      font-size: 1.7rem;
      font-weight: bold;
      margin-top: 5px;
    }

    .special-collab {
      font-size: 1.7rem;
      font-weight: bold;
      margin-top: 5px;
    }

    @media (max-height: 500px), (max-width: 500px) {
      .caption .large, .caption .special-collab {
        font-size: 1.1rem;
      }
      .caption .small {
        font-size: 0.65rem;
      }
    }

    .caption .large a {
       color: white;
       text-decoration: none;
       transition: transform 0.3s ease, text-shadow 0.3s ease;
       display: inline-block;
    }
	
     .caption .large a:hover {
       transform: scale(1.1);
       text-shadow: 0 0 8px #fff;
    }
  </style>
</head>
<body>

<script>
  for (let i = 0; i < 100; i++) {
    const star = document.createElement('div');
    star.classList.add('star');
    star.style.top = `${Math.random() * 100}%`;
    star.style.left = `${Math.random() * 100}%`;
    const delay = Math.random() * 5;
    star.style.animationDelay = `${delay}s, ${delay}s`;
    document.body.appendChild(star);
  }
</script>

<div id="countdownSidebar" style="
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
  padding: 10px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: space-between;
  backdrop-filter: blur(4px);
  color: white;
  font-family: sans-serif;
  transition: width 0.3s ease, padding 0.3s ease;
  overflow: hidden;
  width: 240px;
">

  <div id="countdownWrapper" style="width: 80%; height: 60px; position: relative; transition: opacity 0.3s ease;">
    <iframe
      id="countdownFrame"
      src="https://www.tickcounter.com/widget/countdown/7324985"
      style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; overflow: hidden;"
      title="ALLINDAY">
    </iframe>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
    <div id="toggleButton" onclick="toggleCountdown()" style="
      cursor: pointer;
      font-size: 20px;
    " title="Toggle Countdown">⇄</div> 

    <div id="collapseButton" onclick="toggleCollapse()" style="
      cursor: pointer;
      font-size: 18px;
      user-select: none;
      transition: transform 0.3s ease;
    " title="Collapse">❮</div>
  </div>
</div>

<script>
  let showingAllinday = true;
  let isCollapsed = false;

  const countdownFrame = document.getElementById('countdownFrame');
  const toggleBtn = document.getElementById('toggleButton');
  const collapseBtn = document.getElementById('collapseButton');
  const sidebar = document.getElementById('countdownSidebar');
  const countdownWrapper = document.getElementById('countdownWrapper');

  function toggleCountdown() {
    if (showingAllinday) {
      countdownFrame.src = "https://www.tickcounter.com/widget/countdown/7077908"; // BLUE PARADISE
      countdownFrame.title = "BLUE PARADISE";
    } else {
      countdownFrame.src = "https://www.tickcounter.com/widget/countdown/7324985"; // ALLINDAY
      countdownFrame.title = "ALLINDAY";
    }
    showingAllinday = !showingAllinday;
  }

  function toggleCollapse() {
    if (!isCollapsed) {
      sidebar.style.width = "40px";
      sidebar.style.padding = "15px";
      countdownWrapper.style.opacity = "0";
      toggleBtn.style.display = "none";
      collapseBtn.textContent = "❯";
	  } else {
      sidebar.style.width = "240px";
      sidebar.style.padding = "10px";
      countdownWrapper.style.opacity = "1";
      toggleBtn.style.display = "block";
      collapseBtn.textContent = "❮";
	  }
    isCollapsed = !isCollapsed;
  }
</script>

<div class="carousel-wrapper">
  <div id="carousel-container">
    <div id="spinner" class="spinner"></div>
    <button class="nav-button prev-button" onclick="prevMember()">←</button>
    <img id="carousel" src="" alt="Concept Photo" />
    <button class="nav-button next-button" onclick="nextMember()">→</button>
  </div>

  <div class="caption">
    <div class="small" id="captionSmall"></div>
    <div class="large" id="captionLarge"></div>
    <div class="special-collab" id="captionSpecialCollab"></div>
  </div>
</div>

<script>
  const groupList = [
    { name: "ive", members: 7 }, { name: "aespa", members: 5 }, { name: "stayc", members: 7 },
    { name: "ateez", members: 9 }, { name: "enhypen", members: 8 }, { name: "riize", members: 7 },
    { name: "nct wish", members: 7 }, { name: "tws", members: 7 }, { name: "xikers", members: 11 },
    { name: "illit", members: 6 }, { name: "izna", members: 7 }, { name: "boynextdoor", members: 7 },
    { name: "nowadays", members: 6 }, { name: "p1harmony", members: 7 }, { name: "cix", members: 5 },
    { name: "wei", members: 6 }, { name: "billlie", members: 8 }, { name: "classy", members: 8 },
    { name: "artms", members: 6 }, { name: "nssign", members: 8 }, { name: "evnne", members: 8 },
    { name: "rescene", members: 6 }, { name: "madein", members: 7 }, { name: "meovv", members: 6 }, { name: "minnie", members: 2 },
    { name: "hearts2hearts", members: 9 }, { name: "special performers", members: 8 }, { name: "gfriend", members: 7 },
    { name: "got7", members: 8 }, { name: "onf", members: 7 }, { name: "zerobaseone", members: 10 }
  ];

  const captionMap = {
    "ive": ["PERFORMING ON MD LIVE", "IVE"],
    "aespa": ["PERFORMING ON MD LIVE", "AESPA"],
    "stayc": ["PERFORMING ON MD LIVE", "STAYC"],
    "ateez": ["REPRESENTING STAY", "ATEEZ"],
    "enhypen": ["REPRESENTING STAY", "ENHYPEN"],
    "riize": ["REPRESENTING STAY", "RIIZE"],
    "nct wish": ["REPRESENTING ALLIN", "NCT WISH"],
    "tws": ["REPRESENTING ALLIN", "TWS"],
    "xikers": ["REPRESENTING ALLIN", "XIKERS"],
    "illit": ["REPRESENTING HI TIME", "ILLIT"],
    "izna": ["REPRESENTING HI TIME", "IZNA"],
    "boynextdoor": ["PERFORMING ON MD LIVE", "BOYNEXTDOOR"],
    "nowadays": ["PERFORMING ON MD LIVE", "NOWADAYS"],
    "p1harmony": ["PERFORMING ON MD LIVE", "P1HARMONY"],
    "cix": ["REPRESENTING 4TH GENERATION", "CIX"],
    "wei": ["REPRESENTING 4TH GENERATION", "WEI"],
    "billlie": ["REPRESENTING 4TH GENERATION", "BILLLIE"],
    "classy": ["REPRESENTING 4TH GENERATION", "CLASS:Y"],
    "artms": ["REPRESENTING 4TH GENERATION", "ARTMS"],
    "nssign": ["REPRESENTING 5TH GENERATION", "N.SSIGN"],
    "evnne": ["REPRESENTING 5TH GENERATION", "EVNNE"],
    "rescene": ["REPRESENTING 5TH GENERATION", "RESCENE"],
    "madein": ["REPRESENTING 5TH GENERATION", "MADEIN"],
    "meovv": ["REPRESENTING 5TH GENERATION", "MEOVV"],
    "minnie": ["DEBUTING ON MD LIVE", "MINNIE"],
    "hearts2hearts": ["DEBUTING ON MD LIVE", "HEARTS2HEARTS"],
    "special performers": ["", "SPECIAL COLLABORATION STAGE"],
    "gfriend": ["REPRESENTING 3RD GENERATION", "GFRIEND"],
    "got7": ["REPRESENTING 3RD GENERATION", "GOT7"],
    "onf": ["REPRESENTING 3RD GENERATION", "ONF"],
    "zerobaseone": ["HEADLINING ON MD LIVE", "ZEROBASEONE"]
  };

	const kprofileLinks = {
	  "ive": "https://kprofiles.com/ive-members-profile/",
	  "aespa": "https://kprofiles.com/aespa-members-profile/",
	  "stayc": "https://kprofiles.com/stayc-members-profile/",
	  "ateez": "https://kprofiles.com/ateez-members-profile/",
	  "enhypen": "https://kprofiles.com/enhypen-members-profile/",
	  "riize": "https://kprofiles.com/riize-members-profile/",
	  "nct wish": "https://kprofiles.com/nct-wish-members-profile/",
	  "tws": "https://kprofiles.com/tws-members-profile/",
	  "xikers": "https://kprofiles.com/xikers-members-profile/",
	  "illit": "https://kprofiles.com/illit-members-profile/",
	  "izna": "https://kprofiles.com/izna-members-profile/",
	  "boynextdoor": "https://kprofiles.com/boynextdoor-members-profile/",
	  "nowadays": "https://kprofiles.com/nowadays-members-profile/",
	  "p1harmony": "https://kprofiles.com/p1harmony-members-profile/",
	  "cix": "https://kprofiles.com/cix-members-profile/",
	  "wei": "https://kprofiles.com/wei-members-profile/",
	  "billlie": "https://kprofiles.com/billlie-members-profile/",
	  "classy": "https://kprofiles.com/classy-members-profile/",
	  "artms": "https://kprofiles.com/artms-members-profile/",
	  "nssign": "https://kprofiles.com/nssign-members-profile/",
	  "evnne": "https://kprofiles.com/evnne-members-profile/",
	  "rescene": "https://kprofiles.com/rescene-members-profile/",
	  "madein": "https://kprofiles.com/madein-members-profile/",
	  "meovv": "https://kprofiles.com/meovv-members-profile/",
	  "minnie": "https://kprofiles.com/minnie-gi-dle-profile/",
	  "hearts2hearts": "https://kprofiles.com/hearts2hearts-members-profile/",
	  "special performers": "",
	  "gfriend": "https://kprofiles.com/gfriend-members-profile/",
	  "got7": "https://kprofiles.com/got7-members-profile/",
	  "onf": "https://kprofiles.com/onf-members-profile/",
	  "zerobaseone": "https://kprofiles.com/zerobaseone-members-profile/"
	};

  let currentGroupIndex = 0;
  let currentMemberIndex = 0;

  const imageElement = document.getElementById("carousel");
  const spinner = document.getElementById("spinner");
  const captionSmall = document.getElementById("captionSmall");
  const captionLarge = document.getElementById("captionLarge");
  const captionSpecialCollab = document.getElementById("captionSpecialCollab");

  function preloadGroupImages(groupName, count) {
    for (let i = 1; i <= count + 1; i++) {
      const img = new Image();
      img.src = `${groupName}/${i}.png`;
    }
  }

  function updateCarousel() {
    const group = groupList[currentGroupIndex];
    const member = currentMemberIndex + 1;
    const src = `${group.name}/${member}.png`;

    spinner.style.display = "block";
    imageElement.style.opacity = 0;

    captionSmall.classList.remove("show");
    captionLarge.classList.remove("show");
    captionSpecialCollab.classList.remove("show");

    const tempImage = new Image();
    tempImage.src = src;
    tempImage.onload = () => {
      imageElement.src = src;
      spinner.style.display = "none";
      imageElement.style.opacity = 1;
    };

    preloadGroupImages(group.name, group.members);

    const [smallText, largeText] = captionMap[group.name.toLowerCase()];
    captionSmall.textContent = smallText;

    if (largeText === "SPECIAL COLLABORATION STAGE") {
      captionLarge.textContent = "";
      captionSpecialCollab.textContent = largeText;
      captionSpecialCollab.style.display = 'block';
      captionSpecialCollab.classList.add("show");
    } else {
      if (kprofileLinks[group.name.toLowerCase()]) {
	  captionLarge.innerHTML = `<a href="${kprofileLinks[group.name.toLowerCase()]}" target="_blank" rel="noopener noreferrer">${largeText}</a>`;
	} else {
	  captionLarge.textContent = largeText;
	};
      captionSpecialCollab.style.display = 'none';
      captionLarge.classList.add("show");
    }

    captionSmall.classList.add("show");

    const newURL = `${window.location.pathname}?group=${group.name}`;
    window.history.replaceState(null, '', newURL);
  }

  function nextGroup() {
    currentGroupIndex = (currentGroupIndex + 1) % groupList.length;
    currentMemberIndex = 0;
    updateCarousel();
  }

  function prevGroup() {
    currentGroupIndex = (currentGroupIndex - 1 + groupList.length) % groupList.length;
    currentMemberIndex = 0;
    updateCarousel();
  }

  function nextMember() {
    const group = groupList[currentGroupIndex];
    currentMemberIndex = (currentMemberIndex + 1) % group.members;
    updateCarousel();
  }

  function prevMember() {
    const group = groupList[currentGroupIndex];
    currentMemberIndex = (currentMemberIndex - 1 + group.members) % group.members;
    updateCarousel();
  }

  function getSlugParam() {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get('group');
  }

  window.onload = () => {
    const slug = getSlugParam();
    if (slug) {
      const foundIndex = groupList.findIndex(g => g.name === slug.toLowerCase());
      if (foundIndex !== -1) currentGroupIndex = foundIndex;
    }
    updateCarousel();
  };

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") nextMember();
    if (e.key === "ArrowLeft") prevMember();
  });
</script>

</body>
</html>
